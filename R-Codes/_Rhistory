flight<-read.csv("/home/perfectus/Documents/Rworkspace/topCities.csv",sep="\t",header = F)
airports<-read.csv("/home/perfectus/Documents/Rworkspace/airports.csv",sep=",")
setnames(flight,old="V1",new="year")
setnames(flight,old="V2",new="iata")
library(data.table)
library(googleVis)
flight<-read.csv("/home/perfectus/Documents/Rworkspace/topCities.csv",sep="\t",header = F)
airports<-read.csv("/home/perfectus/Documents/Rworkspace/airports.csv",sep=",")
flight<-read.csv("/home/perfectus/Documents/Rworkspace/topCities.csv",sep="\t",header = F)
airports<-read.csv("/home/perfectus/Documents/Rworkspace/airports.csv",sep=",")
setnames(flight,old="V1",new="year")
setnames(flight,old="V2",new="iata")
setnames(flight,old="V3",new="visits")
airports<-data.table(airports)
flight<-data.table(flight)
#topCities<-flight[,.(visits=sum(visits)),.(iata,year)]
setkey(flight,iata)
setkey(airports,iata)
topCities<-merge(flight,airports,by="iata")
topCities<-topCities[,.(visits=sum(visits),lat=ave(lat),long=ave(long)),.(city,year)]
topCities<-unique(topCities)
View(topCities)
View(topCities)
topCities<-topCities[order(year,-visits,increasing=T)]
topCities<-topCities[,.SD[1:20],.(year)]
View(topCities)
View(topCities)
topCities<-topCities[,.(Population=sum(visits),Latitude=ave(lat),Longitude=ave(long)),.(city)]
View(topCities)
View(topCities)
topCities<-unique(topCities)
View(topCities)
View(topCities)
View(topCities)
View(topCities)
View(topCities)
View(topCities)
topCities$city<-NULL
View(topCities)
View(topCities)
flight<-read.csv("/home/perfectus/Documents/Rworkspace/topCities.csv",sep="\t",header = F)
airports<-read.csv("/home/perfectus/Documents/Rworkspace/airports.csv",sep=",")
setnames(flight,old="V1",new="year")
setnames(flight,old="V2",new="iata")
setnames(flight,old="V3",new="visits")
airports<-data.table(airports)
flight<-data.table(flight)
#topCities<-flight[,.(visits=sum(visits)),.(iata,year)]
View(topCities)
View(topCities)
setkey(flight,iata)
setkey(airports,iata)
topCities<-merge(flight,airports,by="iata")
View(topCities)
View(topCities)
topCities<-topCities[,.(Latitude=ave(lat),Longitude=ave(long),Population=sum(visits)),.(city)]
topCities<-unique(topCities)
View(topCities)
View(topCities)
View(topCities)
View(topCities)
topCities<-topCities[order(-visits,increasing=T)]
View(topCities)
View(topCities)
topCities<-topCities[order(-Population,increasing=T)]
View(topCities)
View(topCities)
t<-topCities[1:20]
View(t)
View(t)
topCities$city<-NULL
View(topCities)
View(topCities)
write.csv(topCities)
write.csv(topCities,file="Mydata.csv")
write.csv(topCities,file="/home/perfectus/Mydata.csv")
write.csv(topCities,file="/home/perfectus/Mydata.csv",row.names=false)
write.csv(topCities,file="/home/perfectus/Mydata.csv",row.names=F)
t$city<-NULL
write.csv(t,file="/home/perfectus/Mydata.csv",row.names=F)
View(t)
View(t)
t$Population<-as.numeric(t$Population)
write.csv(t,file="/home/perfectus/Mydata.csv",row.names=F)
t$Population<-as.numeric(t$Population)
write.csv(t,file="/home/perfectus/Mydata.csv",row.names=F)
View(t)
View(t)
saveRDS(t,"/home/perfectus/Mydata.Rds")
View(topCities)
View(topCities)
View(t)
View(t)
t$Population<-t$Population/3967543
View(t)
View(t)
saveRDS(t,"/home/perfectus/Mydata.Rds")
t<-topCities[1:100]
View(t)
View(t)
View(t)
View(t)
t$Population<-t$Population/15576481
View(t)
View(t)
saveRDS(t,"/home/perfectus/Mydata.Rds")
library(shiny)
library(shinyGlobe)
shinyUI(
)
library(data.table)
library(googleVis)
flight<-read.csv("/home/perfectus/Documents/Rworkspace/topCities.csv",sep="\t",header = F)
airports<-read.csv("/home/perfectus/Documents/Rworkspace/airports.csv",sep=",")
setnames(flight,old="V1",new="year")
setnames(flight,old="V2",new="iata")
setnames(flight,old="V3",new="visits")
airports<-data.table(airports)
flight<-data.table(flight)
#topCities<-flight[,.(visits=sum(visits)),.(iata,year)]
setkey(flight,iata)
setkey(airports,iata)
topCities<-merge(flight,airports,by="iata")
topCities<-topCities[,.(visits=sum(visits),lat=ave(lat),long=ave(long)),.(city,year)]
topCities<-unique(topCities)
topCities<-topCities[order(year,-visits,increasing=T)]
topCities<-topCities[,.SD[1:20],.(year)]
topCities$lat<-NULL
topCities$long<-NULL
#p1<-ggplot(topCities, aes(x=year, y=visits, colour=city, group=city)) +
# geom_line() +
#ggtitle("Top Cities with Highest Traffic ")+
#xlab("")+ylab("Flights Traffic")+
#scale_x_continuous(breaks=c(1986:2009))
#p1
Motion<-gvisMotionChart(topCities,
idvar="city",
timevar="year",options=list(width=1240, height=600))
plot(Motion)
cat(Motion$html$chart, file="/home/perfectus/housing/1.html")
